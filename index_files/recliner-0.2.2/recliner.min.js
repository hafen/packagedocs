!function(a){a.fn.recliner=function(b){function c(a,b,c){b||(b=250);var d,e;return function(){var f=c||this,g=+new Date,h=arguments;d&&d+b>g?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}}function d(c){var d=a(c),f=d.attr(b.attrib),g=d.prop("tagName");if(f){if("IMG"!=g&&"IFRAME"!=g)return d.addClass("lazy-loading"),void d.load(f,function(a){e(d)});d.attr("src",f)}e(d)}function e(a){a.removeClass("lazy-loading"),a.addClass("lazy-loaded"),a.trigger("lazyshow")}function f(){var c=j.filter(function(){var c=a(this);if("none"!=c.css("display")){var d="undefined"!=typeof window.innerHeight?window.innerHeight:i.height(),e=i.scrollTop(),f=e+d,g=c.offset().top,h=g+c.height();return h>=e-b.threshold&&g<=f+b.threshold}});h=c.trigger("lazyload"),j=j.not(h)}function g(a){a.one("lazyload",function(){d(this)}),f()}var h,i=a(window),j=this,k=this.selector,b=a.extend({attrib:"data-src",throttle:300,threshold:100,printable:!0,live:!0},b);return i.on("scroll.lazy resize.lazy lookup.lazy",c(function(a){i.trigger("lazyupdate")},b.throttle)),i.on("lazyupdate",function(a){f()}),b.live&&a(document).ajaxSuccess(function(b,c,d){var e=a(k).not(".lazy-loaded").not(".lazy-loading");j=j.add(e),g(e)}),b.printable&&window.matchMedia&&window.matchMedia("print").addListener(function(b){b.matches&&a(k).trigger("lazyload")}),g(this),this}}(window.jQuery);
